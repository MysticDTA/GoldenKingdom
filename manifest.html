<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Glyph Manifest Â· DivineTruthAscension</title>
  <meta name="description" content="Manifest of all glyphs within the DivineTruthAscension sanctuary, tuned by aura frequency.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background: #0d0d0d;
      color: #FFEB3B;
      font-family: 'Courier New', monospace;
      padding: 2em;
      text-align: center;
    }

    h1, h2 {
      text-shadow: 0 0 10px #FFD700;
    }

    select {
      margin: 1em;
      padding: 0.5em;
      font-size: 1em;
      background-color: #1a1a1a;
      color: #FFEB3B;
      border: 1px solid #FF4500;
    }

    .glyph-card {
      border: 1px solid #FF4500;
      background-color: rgba(17, 17, 17, 0.8);
      margin: 2em auto;
      padding: 1em;
      max-width: 600px;
      text-align: left;
    }

    .glyph-card h2 {
      color: #FFD700;
      margin-bottom: 0.5em;
    }

    .glyph-card svg {
      display: block;
      margin: 1em auto;
      max-width: 100%;
      height: auto;
    }

    footer {
      margin-top: 3em;
      font-size: 0.8em;
      color: #aaa;
    }
  </style>
</head>
<body>
  <h1>ðŸ“œ Glyph Manifest</h1>
  <p>All active glyphs within the DivineTruthAscension sanctuary.</p>

  <div id="resonanceSummary" style="margin: 2em 0; font-size: 1em; color: #FFDD99;"></div>

  <label for="resonanceFilter">Tune by Aura Frequency:</label>
  <select id="resonanceFilter">
    <option value="">All Frequencies</option>
    <option value="solar">Solar</option>
    <option value="ignition">Ignition</option>
    <option value="lunar">Lunar</option>
    <option value="etheric">Etheric</option>
  </select>

  <div id="manifest"></div>

  <footer>
    Manifest generated from /api/glyphManifest Â· Powered by Netlify Â· Last tuned: 2025-09-16
  </footer>

  <script>
    const container = document.getElementById("manifest");
    const filter = document.getElementById("resonanceFilter");
    const summary = document.getElementById("resonanceSummary");
    let fullManifest = [];

    async function loadManifest() {
      const res = await fetch("/.netlify/functions/glyphManifest");
      const data = await res.json();
      fullManifest = data.manifest;
      renderSummary(fullManifest);
      renderManifest(fullManifest);
    }

    function renderSummary(glyphs) {
      const frequencies = glyphs.reduce((acc, glyph) => {
        const freq = glyph.aura?.frequency || "unknown";
        acc[freq] = (acc[freq] || 0) + 1;
        return acc;
      }, {});

      const lines = Object.entries(frequencies).map(
        ([freq, count]) => `â€¢ ${freq.charAt(0).toUpperCase() + freq.slice(1)}: ${count} glyph${count > 1 ? "s" : ""}`
      );

      summary.innerHTML = `<strong>Resonance Summary:</strong><br>${lines.join("<br>")}`;
    }

    function renderManifest(glyphs) {
      container.innerHTML = "";
      const selected = filter.value;

      glyphs
        .filter(g => !selected || (g.aura?.frequency === selected))
        .forEach(glyph => {
          const card = document.createElement("div");
          card.className = "glyph-card";

          card.innerHTML = `
            <h2>${glyph.name}</h2>
            <p><strong>Description:</strong> ${glyph.description}</p>
            <p><strong>Aura Frequency:</strong> ${glyph.aura?.frequency || "Unknown"}</p>
            <p><strong>Aura Color:</strong> ${glyph.aura?.color || "â€”"}</p>
            <p><strong>Geometry:</strong> ${JSON.stringify(glyph.geometry)}</p>
            <p><strong>Last Updated:</strong> ${glyph.lastUpdated || "â€”"}</p>
            ${glyph.svgPreview ? glyph.svgPreview : "<p>No SVG preview available.</p>"}
          `;

          container.appendChild(card);
        });
    }

    filter.addEventListener("change", () => renderManifest(fullManifest));
    loadManifest();
  </script>
</body>
</html>
